# ジェスチャーウルフ - タスク分解書

## 1. 概要

本ドキュメントでは、ジェスチャーウルフアプリの開発を段階的に進めるためのタスク分解を定義します。
各タスクは1-4時間程度で完了できる粒度に分解されています。

---

## 2. Phase 1: プロジェクトセットアップ（1-2日）

### 2.1 プロジェクト初期化

#### TASK-001: Flutterプロジェクト作成
- **優先度**: P0（最高）
- **見積**: 0.5h
- **説明**: Flutterプロジェクトの初期化
- **作業内容**:
  - [ ] `flutter create gesture_wolf`を実行
  - [ ] 不要なサンプルコードを削除
  - [ ] Git初期化、.gitignore設定
- **完了条件**: プロジェクトがビルド・実行できる

---

#### TASK-002: 依存パッケージ設定
- **優先度**: P0
- **見積**: 1h
- **説明**: pubspec.yamlに必要なパッケージを追加
- **作業内容**:
  - [ ] flutter_riverpod追加
  - [ ] go_router追加
  - [ ] shared_preferences追加
  - [ ] google_fonts追加（オプション）
  - [ ] flutter_animate追加（オプション）
  - [ ] audioplayers追加（効果音用、オプション）
  - [ ] `flutter pub get`実行
- **完了条件**: 全パッケージがインストールされ、ビルドエラーがない
- **依存**: TASK-001

---

#### TASK-003: ディレクトリ構造作成
- **優先度**: P0
- **見積**: 0.5h
- **説明**: 設計書通りのディレクトリ構造を作成
- **作業内容**:
  - [ ] lib/core/ディレクトリ作成
  - [ ] lib/data/ディレクトリ作成
  - [ ] lib/domain/ディレクトリ作成
  - [ ] lib/presentation/ディレクトリ作成
  - [ ] lib/services/ディレクトリ作成
  - [ ] 各ディレクトリに.gitkeepまたはREADME作成
- **完了条件**: 設計書通りのディレクトリ構造が作成される
- **依存**: TASK-001

---

### 2.2 基本設定

#### TASK-004: アプリ定数定義
- **優先度**: P0
- **見積**: 1h
- **説明**: カラー、テキストスタイル、サイズ定数を定義
- **作業内容**:
  - [ ] lib/core/constants/app_colors.dart作成
  - [ ] lib/core/constants/app_text_styles.dart作成
  - [ ] lib/core/constants/app_sizes.dart作成
  - [ ] lib/core/constants/app_strings.dart作成
- **完了条件**: 設計書通りの定数が定義される
- **依存**: TASK-003

---

#### TASK-005: テーマ設定
- **優先度**: P0
- **見積**: 1.5h
- **説明**: ライト/ダークテーマを設定
- **作業内容**:
  - [ ] lib/core/theme/light_theme.dart作成
  - [ ] lib/core/theme/dark_theme.dart作成
  - [ ] lib/core/theme/app_theme.dart作成
  - [ ] Material Design 3適用
- **完了条件**: テーマが適用され、ダークモード切り替えが可能
- **依存**: TASK-004

---

#### TASK-006: ルーティング設定
- **優先度**: P0
- **見積**: 2h
- **説明**: go_routerでルーティングを設定
- **作業内容**:
  - [ ] lib/core/router/app_router.dart作成
  - [ ] 全画面のルート定義
  - [ ] 画面遷移テスト
- **完了条件**: 全画面への遷移が定義される
- **依存**: TASK-003

---

#### TASK-007: メインアプリ構成
- **優先度**: P0
- **見積**: 1h
- **説明**: main.dartとapp.dartを設定
- **作業内容**:
  - [ ] lib/main.dart作成
  - [ ] lib/app.dart作成
  - [ ] ProviderScopeでラップ
  - [ ] MaterialAppにテーマとルーターを適用
- **完了条件**: アプリが起動し、基本的な画面遷移ができる
- **依存**: TASK-005, TASK-006

---

## 3. Phase 2: データ層実装（2-3日）

### 3.1 データモデル

#### TASK-008: Playerモデル実装
- **優先度**: P0
- **見積**: 1h
- **説明**: プレイヤー情報のモデルクラス作成
- **作業内容**:
  - [ ] lib/data/models/player.dart作成
  - [ ] プロパティ定義
  - [ ] copyWith実装
  - [ ] toJson/fromJson実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

#### TASK-009: ThemePairモデル実装
- **優先度**: P0
- **見積**: 1h
- **説明**: お題ペアのモデルクラス作成
- **作業内容**:
  - [ ] lib/data/models/theme_pair.dart作成
  - [ ] プロパティ定義
  - [ ] toJson/fromJson実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

#### TASK-010: GameStateモデル実装
- **優先度**: P0
- **見積**: 2h
- **説明**: ゲーム状態のモデルクラス作成
- **作業内容**:
  - [ ] lib/data/models/game_state.dart作成
  - [ ] GamePhase enum定義
  - [ ] プロパティ定義
  - [ ] copyWith実装
  - [ ] ヘルパーメソッド実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-008, TASK-009

---

#### TASK-011: GameSettingsモデル実装
- **優先度**: P0
- **見積**: 1h
- **説明**: ゲーム設定のモデルクラス作成
- **作業内容**:
  - [ ] lib/data/models/game_settings.dart作成
  - [ ] プロパティ定義
  - [ ] copyWith実装
  - [ ] toJson/fromJson実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

#### TASK-012: GameHistoryモデル実装（オプション）
- **優先度**: P2（低）
- **見積**: 1h
- **説明**: ゲーム履歴のモデルクラス作成
- **作業内容**:
  - [ ] lib/data/models/game_history.dart作成
  - [ ] プロパティ定義
  - [ ] toJson/fromJson実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

### 3.2 お題データ

#### TASK-013: デフォルトお題データ作成
- **優先度**: P0
- **見積**: 2h
- **説明**: 最低25組のお題データを作成
- **作業内容**:
  - [ ] lib/data/data_sources/themes/default_themes.dart作成
  - [ ] 動物カテゴリー（5組以上）
  - [ ] スポーツカテゴリー（5組以上）
  - [ ] 職業カテゴリー（5組以上）
  - [ ] 動作カテゴリー（5組以上）
  - [ ] その他カテゴリー（5組以上）
- **完了条件**: 各カテゴリー5組以上、合計25組以上
- **依存**: TASK-009

---

#### TASK-014: ThemeRepository実装
- **優先度**: P0
- **見積**: 2h
- **説明**: お題データへのアクセスを提供
- **作業内容**:
  - [ ] lib/data/repositories/theme_repository.dart作成
  - [ ] getAllThemes実装
  - [ ] getThemesByCategory実装
  - [ ] getCategories実装
  - [ ] getRandomTheme実装
  - [ ] getThemeById実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-013

---

### 3.3 ローカルストレージ

#### TASK-015: StorageService実装
- **優先度**: P0
- **見積**: 3h
- **説明**: SharedPreferencesでのデータ永続化
- **作業内容**:
  - [ ] lib/services/storage_service.dart作成
  - [ ] saveSettings実装
  - [ ] loadSettings実装
  - [ ] saveCustomThemes実装
  - [ ] loadCustomThemes実装
  - [ ] saveFavoriteThemeIds実装（オプション）
  - [ ] loadFavoriteThemeIds実装（オプション）
  - [ ] saveGameHistory実装（オプション）
  - [ ] loadGameHistory実装（オプション）
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-011

---

## 4. Phase 3: ビジネスロジック実装（2-3日）

### 4.1 ユースケース

#### TASK-016: SelectWolfUseCase実装
- **優先度**: P0
- **見積**: 1.5h
- **説明**: ウルフをランダムに選出するロジック
- **作業内容**:
  - [ ] lib/domain/use_cases/select_wolf_use_case.dart作成
  - [ ] execute実装
  - [ ] ランダム性の保証
  - [ ] 単体テスト作成（複数回実行して偏りをチェック）
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

#### TASK-017: CalculateVotesUseCase実装
- **優先度**: P0
- **見積**: 1h
- **説明**: 投票を集計するロジック
- **作業内容**:
  - [ ] lib/domain/use_cases/calculate_votes_use_case.dart作成
  - [ ] execute実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

#### TASK-018: DetermineWinnerUseCase実装
- **優先度**: P0
- **見積**: 1h
- **説明**: 勝者を判定するロジック
- **作業内容**:
  - [ ] lib/domain/use_cases/determine_winner_use_case.dart作成
  - [ ] execute実装
  - [ ] 単体テスト作成（各種パターン）
- **完了条件**: テストが通過する
- **依存**: TASK-003

---

### 4.2 状態管理

#### TASK-019: GameSettingsProvider実装
- **優先度**: P0
- **見積**: 2h
- **説明**: ゲーム設定の状態管理
- **作業内容**:
  - [ ] lib/presentation/providers/game_settings_provider.dart作成
  - [ ] GameSettingsNotifier実装
  - [ ] 全メソッド実装（7個）
  - [ ] StorageServiceとの連携
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-011, TASK-015

---

#### TASK-020: GameStateProvider実装（基本機能）
- **優先度**: P0
- **見積**: 4h
- **説明**: ゲーム状態の管理（基本部分）
- **作業内容**:
  - [ ] lib/presentation/providers/game_state_provider.dart作成
  - [ ] GameStateNotifier実装
  - [ ] setPlayerCount実装
  - [ ] updatePlayerName実装
  - [ ] selectTheme実装
  - [ ] startGame実装
  - [ ] _assignThemesAndWolves実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-010, TASK-016

---

#### TASK-021: GameStateProvider実装（お題配布）
- **優先度**: P0
- **見積**: 2h
- **説明**: お題配布フェーズの処理
- **作業内容**:
  - [ ] showTheme実装
  - [ ] confirmTheme実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-020

---

#### TASK-022: GameStateProvider実装（ジェスチャー・投票）
- **優先度**: P0
- **見積**: 3h
- **説明**: ジェスチャー、投票フェーズの処理
- **作業内容**:
  - [ ] nextPlayer実装
  - [ ] startSecondRound実装
  - [ ] startVoting実装
  - [ ] vote実装
  - [ ] getVoteResults実装
  - [ ] getMostVotedPlayers実装
  - [ ] didCitizensWin実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-020, TASK-017, TASK-018

---

#### TASK-023: GameStateProvider実装（リセット）
- **優先度**: P0
- **見積**: 1h
- **説明**: ゲームリセット機能
- **作業内容**:
  - [ ] resetGame実装
  - [ ] backToPlayerSetup実装
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-020

---

#### TASK-024: ThemeProvider実装
- **優先度**: P0
- **見積**: 1h
- **説明**: お題データのProvider
- **作業内容**:
  - [ ] lib/presentation/providers/theme_provider.dart作成
  - [ ] themesProvider実装
  - [ ] themesByCategoryProvider実装
  - [ ] categoriesProvider実装
- **完了条件**: データが正しく取得できる
- **依存**: TASK-014

---

#### TASK-025: CustomThemesProvider実装
- **優先度**: P1（中）
- **見積**: 2h
- **説明**: カスタムお題の管理
- **作業内容**:
  - [ ] CustomThemesNotifier実装
  - [ ] addCustomTheme実装
  - [ ] removeCustomTheme実装
  - [ ] StorageServiceとの連携
  - [ ] 単体テスト作成
- **完了条件**: テストが通過する
- **依存**: TASK-015, TASK-024

---

## 5. Phase 4: UI実装（4-5日）

### 5.1 共通ウィジェット

#### TASK-026: AppButton実装
- **優先度**: P0
- **見積**: 2h
- **説明**: 汎用ボタンウィジェット
- **作業内容**:
  - [ ] lib/presentation/widgets/common/app_button.dart作成
  - [ ] 4つのボタンタイプ実装
  - [ ] 3つのサイズバリエーション実装
  - [ ] アイコン対応
  - [ ] ローディング状態対応
  - [ ] ウィジェットテスト作成
- **完了条件**: テストが通過し、見た目が良い
- **依存**: TASK-004

---

#### TASK-027: CountdownTimer実装
- **優先度**: P0
- **見積**: 3h
- **説明**: カウントダウンタイマーウィジェット
- **作業内容**:
  - [ ] lib/presentation/widgets/common/countdown_timer.dart作成
  - [ ] タイマーロジック実装
  - [ ] 警告表示実装
  - [ ] プログレスバー実装
  - [ ] ウィジェットテスト作成
- **完了条件**: タイマーが正確に動作する
- **依存**: TASK-004

---

#### TASK-028: その他共通ウィジェット実装
- **優先度**: P1（中）
- **見積**: 2h
- **説明**: カード、アバター、ダイアログなど
- **作業内容**:
  - [ ] lib/presentation/widgets/common/app_card.dart作成
  - [ ] lib/presentation/widgets/common/player_avatar.dart作成
  - [ ] lib/presentation/widgets/dialogs/confirmation_dialog.dart作成
  - [ ] lib/presentation/widgets/dialogs/info_dialog.dart作成
- **完了条件**: 各ウィジェットが正しく表示される
- **依存**: TASK-004

---

### 5.2 画面実装

#### TASK-029: ホーム画面実装
- **優先度**: P0
- **見積**: 2h
- **説明**: アプリのエントリーポイント
- **作業内容**:
  - [ ] lib/presentation/screens/home/home_screen.dart作成
  - [ ] タイトル表示
  - [ ] ゲーム開始ボタン
  - [ ] ルール説明ボタン
  - [ ] 設定ボタン
  - [ ] レイアウト調整
- **完了条件**: 各ボタンが正しく動作する
- **依存**: TASK-026

---

#### TASK-030: プレイヤー設定画面実装
- **優先度**: P0
- **見積**: 4h
- **説明**: プレイヤー数と名前の設定
- **作業内容**:
  - [ ] lib/presentation/screens/player_setup/player_setup_screen.dart作成
  - [ ] プレイヤー数選択UI
  - [ ] プレイヤー名入力リスト
  - [ ] ウルフ人数表示
  - [ ] バリデーション
  - [ ] 次へボタン
  - [ ] GameStateProviderとの連携
- **完了条件**: プレイヤー設定が正しく保存される
- **依存**: TASK-020, TASK-026

---

#### TASK-031: お題選択画面実装
- **優先度**: P0
- **見積**: 4h
- **説明**: お題の選択
- **作業内容**:
  - [ ] lib/presentation/screens/theme_selection/theme_selection_screen.dart作成
  - [ ] カテゴリー別タブ
  - [ ] お題リスト表示
  - [ ] ランダム選択ボタン
  - [ ] カスタムお題入力セクション
  - [ ] ゲーム開始ボタン
  - [ ] ThemeProviderとの連携
- **完了条件**: お題が選択でき、次に進める
- **依存**: TASK-020, TASK-024, TASK-026

---

#### TASK-032: お題配布画面実装
- **優先度**: P0
- **見積**: 3h
- **説明**: 各プレイヤーにお題を個別表示
- **作業内容**:
  - [ ] lib/presentation/screens/theme_distribution/theme_distribution_screen.dart作成
  - [ ] プレイヤー名表示
  - [ ] お題を見るボタン
  - [ ] お題表示（秘匿性確保）
  - [ ] 確認しましたボタン
  - [ ] 進行状況表示
  - [ ] GameStateProviderとの連携
- **完了条件**: お題が秘匿的に表示され、次に進める
- **依存**: TASK-021, TASK-026

---

#### TASK-033: ジェスチャータイム画面実装
- **優先度**: P0
- **見積**: 4h
- **説明**: ジェスチャー披露タイム
- **作業内容**:
  - [ ] lib/presentation/screens/gesture_time/gesture_time_screen.dart作成
  - [ ] 現在のプレイヤー表示
  - [ ] CountdownTimer配置
  - [ ] 次のプレイヤーボタン
  - [ ] 進行状況表示
  - [ ] 2周目選択UI
  - [ ] GameStateProviderとの連携
- **完了条件**: タイマーが動作し、次に進める
- **依存**: TASK-022, TASK-027

---

#### TASK-034: ディスカッション画面実装
- **優先度**: P0
- **見積**: 2h
- **説明**: 議論時間
- **作業内容**:
  - [ ] lib/presentation/screens/discussion/discussion_screen.dart作成
  - [ ] CountdownTimer配置
  - [ ] ルール表示
  - [ ] プレイヤーリスト表示
  - [ ] 投票へ進むボタン
  - [ ] GameStateProviderとの連携
- **完了条件**: タイマーが動作し、投票に進める
- **依存**: TASK-022, TASK-027

---

#### TASK-035: 投票画面実装
- **優先度**: P0
- **見積**: 4h
- **説明**: ウルフ投票
- **作業内容**:
  - [ ] lib/presentation/screens/voting/voting_screen.dart作成
  - [ ] プレイヤーボタングリッド
  - [ ] 投票確定UI
  - [ ] 投票状況表示
  - [ ] 投票結果集計表示
  - [ ] GameStateProviderとの連携
- **完了条件**: 投票が記録され、結果が表示される
- **依存**: TASK-022, TASK-026

---

#### TASK-036: 結果画面実装
- **優先度**: P0
- **見積**: 4h
- **説明**: ゲーム結果の表示
- **作業内容**:
  - [ ] lib/presentation/screens/result/result_screen.dart作成
  - [ ] 勝利チーム表示（アニメーション）
  - [ ] ウルフ公開
  - [ ] 全プレイヤーのお題表示
  - [ ] 投票結果サマリー
  - [ ] もう一度遊ぶボタン
  - [ ] ホームに戻るボタン
  - [ ] GameStateProviderとの連携
- **完了条件**: 結果が正しく表示される
- **依存**: TASK-022, TASK-023, TASK-026

---

#### TASK-037: 設定画面実装
- **優先度**: P0
- **見積**: 3h
- **説明**: ゲーム設定
- **作業内容**:
  - [ ] lib/presentation/screens/settings/settings_screen.dart作成
  - [ ] 時間設定スライダー
  - [ ] 音声設定スイッチ
  - [ ] ダークモードスイッチ
  - [ ] 言語選択（オプション）
  - [ ] GameSettingsProviderとの連携
- **完了条件**: 設定が保存・反映される
- **依存**: TASK-019, TASK-026

---

#### TASK-038: ルール説明画面実装
- **優先度**: P0
- **見積**: 2h
- **説明**: ゲームルールの説明
- **作業内容**:
  - [ ] lib/presentation/screens/rules/rules_screen.dart作成
  - [ ] ゲーム概要
  - [ ] 基本ルール
  - [ ] 遊び方の流れ
  - [ ] 勝利条件
  - [ ] 閉じるボタン
- **完了条件**: ルールが分かりやすく表示される
- **依存**: TASK-004, TASK-026

---

## 6. Phase 5: 追加機能実装（2-3日）

### 6.1 音声機能（オプション）

#### TASK-039: AudioService実装
- **優先度**: P1（中）
- **見積**: 3h
- **説明**: 効果音・BGMの再生
- **作業内容**:
  - [ ] lib/services/audio_service.dart作成
  - [ ] initialize実装
  - [ ] playTap実装
  - [ ] playWarning実装
  - [ ] playComplete実装
  - [ ] playSuccess実装
  - [ ] playBGM実装
  - [ ] setSoundEnabled実装
  - [ ] setMusicEnabled実装
- **完了条件**: 音声が正しく再生される
- **依存**: TASK-003

---

#### TASK-040: 音声アセット準備
- **優先度**: P1（中）
- **見積**: 2h
- **説明**: 効果音・BGMファイルの準備
- **作業内容**:
  - [ ] assets/sounds/ディレクトリ作成
  - [ ] tap.mp3（タップ音）
  - [ ] warning.mp3（警告音）
  - [ ] complete.mp3（完了音）
  - [ ] success.mp3（成功音）
  - [ ] bgm.mp3（BGM、オプション）
  - [ ] pubspec.yamlにアセット登録
- **完了条件**: 音声ファイルが読み込める
- **依存**: なし

---

### 6.2 履歴機能（オプション）

#### TASK-041: ゲーム履歴保存機能実装
- **優先度**: P2（低）
- **見積**: 3h
- **説明**: プレイ履歴の記録
- **作業内容**:
  - [ ] GameHistoryProvider実装
  - [ ] 結果画面から履歴保存
  - [ ] 最新10件を保存
  - [ ] 履歴画面作成（簡易版）
- **完了条件**: 履歴が保存・表示される
- **依存**: TASK-012, TASK-015, TASK-036

---

### 6.3 お気に入り機能（オプション）

#### TASK-042: お気に入りお題機能実装
- **優先度**: P2（低）
- **見積**: 2h
- **説明**: お題をお気に入りに追加
- **作業内容**:
  - [ ] FavoriteThemesProvider実装
  - [ ] お題選択画面にお気に入りボタン追加
  - [ ] お気に入りタブ追加
- **完了条件**: お気に入りが保存・表示される
- **依存**: TASK-015, TASK-031

---

## 7. Phase 6: テスト・調整（2-3日）

### 7.1 テスト

#### TASK-043: 単体テスト実装
- **優先度**: P0
- **見積**: 4h
- **説明**: 主要ロジックの単体テスト
- **作業内容**:
  - [ ] モデルクラスのテスト
  - [ ] ユースケースのテスト
  - [ ] リポジトリのテスト
  - [ ] カバレッジ確認（目標60%以上）
- **完了条件**: テストが通過し、カバレッジ目標達成
- **依存**: 各実装タスク

---

#### TASK-044: ウィジェットテスト実装
- **優先度**: P1（中）
- **見積**: 3h
- **説明**: 主要ウィジェットのテスト
- **作業内容**:
  - [ ] CountdownTimerのテスト
  - [ ] AppButtonのテスト
  - [ ] その他重要ウィジェットのテスト
- **完了条件**: テストが通過する
- **依存**: TASK-026, TASK-027

---

#### TASK-045: 統合テスト実装
- **優先度**: P1（中）
- **見積**: 4h
- **説明**: ゲームフロー全体のテスト
- **作業内容**:
  - [ ] ゲーム開始から終了までのフロー
  - [ ] 各画面遷移のテスト
  - [ ] エラーケースのテスト
- **完了条件**: テストが通過する
- **依存**: 全UI実装タスク

---

#### TASK-046: 実機テスト
- **優先度**: P0
- **見積**: 4h
- **説明**: Android/iOS実機での動作確認
- **作業内容**:
  - [ ] Android端末でテスト
  - [ ] iOS端末でテスト
  - [ ] 画面サイズバリエーション確認
  - [ ] パフォーマンス確認
  - [ ] バグリスト作成
- **完了条件**: 主要な問題がない
- **依存**: 全実装タスク

---

### 7.2 UI/UX調整

#### TASK-047: デザイン調整
- **優先度**: P0
- **見積**: 4h
- **説明**: 見た目の改善
- **作業内容**:
  - [ ] 余白・サイズ調整
  - [ ] 配色調整
  - [ ] フォントサイズ調整
  - [ ] ダークモード確認
- **完了条件**: デザインが洗練される
- **依存**: 全UI実装タスク

---

#### TASK-048: アニメーション追加
- **優先度**: P1（中）
- **見積**: 3h
- **説明**: 画面遷移・結果表示のアニメーション
- **作業内容**:
  - [ ] 画面遷移アニメーション
  - [ ] 結果画面の勝利演出
  - [ ] ボタンのフィードバック
  - [ ] flutter_animate活用
- **完了条件**: アニメーションが自然
- **依存**: TASK-047

---

#### TASK-049: アクセシビリティ対応
- **優先度**: P1（中）
- **見積**: 2h
- **説明**: アクセシビリティの改善
- **作業内容**:
  - [ ] セマンティクス追加
  - [ ] コントラスト比確認
  - [ ] フォーカス順序確認
  - [ ] スクリーンリーダーテスト
- **完了条件**: アクセシビリティスコアが高い
- **依存**: TASK-047

---

### 7.3 バグ修正・最適化

#### TASK-050: バグ修正
- **優先度**: P0
- **見積**: 8h（変動あり）
- **説明**: 発見されたバグの修正
- **作業内容**:
  - [ ] バグリストから優先度順に修正
  - [ ] 修正のテスト
  - [ ] リグレッションテスト
- **完了条件**: 致命的なバグがない
- **依存**: TASK-046

---

#### TASK-051: パフォーマンス最適化
- **優先度**: P1（中）
- **見積**: 3h
- **説明**: アプリの高速化
- **作業内容**:
  - [ ] 不要な再ビルド削減
  - [ ] constコンストラクタ使用
  - [ ] メモリリーク確認
  - [ ] 起動時間確認
- **完了条件**: パフォーマンス要求を満たす
- **依存**: TASK-050

---

## 8. Phase 7: リリース準備（1-2日）

### 8.1 アセット・設定

#### TASK-052: アプリアイコン作成
- **優先度**: P0
- **見積**: 2h
- **説明**: アプリアイコンの作成と設定
- **作業内容**:
  - [ ] アイコンデザイン作成（1024x1024）
  - [ ] Android用アイコン生成
  - [ ] iOS用アイコン生成
  - [ ] flutter_launcher_iconsで設定
- **完了条件**: アイコンが正しく表示される
- **依存**: なし

---

#### TASK-053: スプラッシュスクリーン設定
- **優先度**: P1（中）
- **見積**: 1h
- **説明**: 起動画面の設定
- **作業内容**:
  - [ ] スプラッシュスクリーンデザイン
  - [ ] Android設定
  - [ ] iOS設定
- **完了条件**: スプラッシュが表示される
- **依存**: TASK-052

---

#### TASK-054: Android設定
- **優先度**: P0
- **見積**: 2h
- **説明**: Android固有の設定
- **作業内容**:
  - [ ] build.gradle設定（minSdkVersion, targetSdkVersionなど）
  - [ ] パッケージ名設定
  - [ ] 権限設定
  - [ ] 署名設定
- **完了条件**: Androidでビルド・実行できる
- **依存**: なし

---

#### TASK-055: iOS設定
- **優先度**: P0
- **見積**: 2h
- **説明**: iOS固有の設定
- **作業内容**:
  - [ ] Info.plist設定
  - [ ] Bundle ID設定
  - [ ] 権限設定
  - [ ] プロビジョニング設定
- **完了条件**: iOSでビルド・実行できる
- **依存**: なし

---

### 8.2 ドキュメント

#### TASK-056: README作成
- **優先度**: P0
- **見積**: 2h
- **説明**: プロジェクトのREADME
- **作業内容**:
  - [ ] プロジェクト概要
  - [ ] セットアップ手順
  - [ ] ビルド方法
  - [ ] スクリーンショット
  - [ ] ライセンス情報
- **完了条件**: READMEが完成
- **依存**: なし

---

#### TASK-057: プライバシーポリシー作成（オプション）
- **優先度**: P2（低）
- **見積**: 1h
- **説明**: プライバシーポリシーの作成
- **作業内容**:
  - [ ] 収集する情報（なし）を明記
  - [ ] ローカルストレージの使用を説明
  - [ ] 連絡先情報
- **完了条件**: ポリシーが完成
- **依存**: なし

---

### 8.3 最終確認

#### TASK-058: 最終テスト
- **優先度**: P0
- **見積**: 4h
- **説明**: リリース前の最終確認
- **作業内容**:
  - [ ] 全機能の動作確認
  - [ ] 3-8人の全パターンテスト
  - [ ] ストレステスト
  - [ ] リリースビルドテスト
- **完了条件**: 問題なく動作する
- **依存**: 全タスク

---

#### TASK-059: ストア準備（オプション）
- **優先度**: P2（低）
- **見積**: 3h
- **説明**: アプリストア公開準備
- **作業内容**:
  - [ ] スクリーンショット作成
  - [ ] アプリ説明文作成
  - [ ] Google Play Console設定
  - [ ] App Store Connect設定
- **完了条件**: ストア公開準備完了
- **依存**: TASK-058

---

## 9. タスクサマリー

### 9.1 優先度別集計

| 優先度 | タスク数 | 合計見積時間 |
|--------|---------|-------------|
| P0（最高） | 43 | 約120時間 |
| P1（中） | 11 | 約28時間 |
| P2（低） | 5 | 約12時間 |
| **合計** | **59** | **約160時間** |

### 9.2 フェーズ別集計

| フェーズ | タスク数 | 見積日数 |
|---------|---------|---------|
| Phase 1: セットアップ | 7 | 1-2日 |
| Phase 2: データ層 | 8 | 2-3日 |
| Phase 3: ビジネスロジック | 10 | 2-3日 |
| Phase 4: UI実装 | 13 | 4-5日 |
| Phase 5: 追加機能 | 4 | 2-3日 |
| Phase 6: テスト・調整 | 9 | 2-3日 |
| Phase 7: リリース準備 | 8 | 1-2日 |
| **合計** | **59** | **14-21日** |

### 9.3 クリティカルパス

必須タスク（P0）のみを実施する場合の最短ルート：
1. TASK-001〜007: セットアップ（1日）
2. TASK-008〜015: データ層（2日）
3. TASK-016〜023: ビジネスロジック（2日）
4. TASK-026〜038: UI実装（4日）
5. TASK-043, 046〜051: テスト・調整（2日）
6. TASK-052, 054〜056, 058: リリース準備（1日）

**最短12日で必須機能を実装可能**

---

## 10. リスク管理

### 10.1 高リスクタスク

#### RISK-001: 状態管理の複雑化
- **影響タスク**: TASK-020〜023
- **対策**: 早めにプロトタイプを作成し、設計を検証

#### RISK-002: タイマーの精度
- **影響タスク**: TASK-027, TASK-033, TASK-034
- **対策**: バックグラウンド動作を考慮した実装

#### RISK-003: お題の秘匿性
- **影響タスク**: TASK-032
- **対策**: UXテストで他の人に見られないか確認

---

## 11. 開発順序の推奨

### 11.1 推奨順序（必須機能のみ）

1. **Week 1**: TASK-001〜015（セットアップ〜データ層）
2. **Week 2**: TASK-016〜030（ビジネスロジック〜ホーム・プレイヤー設定）
3. **Week 3**: TASK-031〜038（残りのUI実装）
4. **Week 4**: TASK-043〜058（テスト・調整・リリース準備）

### 11.2 追加機能の開発順序

必須機能完成後、優先度順に実装：
1. TASK-039〜040（音声機能）
2. TASK-042（お気に入り）
3. TASK-041（履歴）

---

## 12. チェックリスト

### 12.1 開発完了チェックリスト

- [ ] 全P0タスクが完了
- [ ] 単体テストカバレッジ60%以上
- [ ] Android実機で動作確認
- [ ] iOS実機で動作確認
- [ ] 3-8人の全パターンでゲーム実施
- [ ] パフォーマンス要求を満たす
- [ ] READMEが完成
- [ ] 致命的なバグがない

### 12.2 リリース準備チェックリスト

- [ ] アプリアイコン設定完了
- [ ] スプラッシュスクリーン設定完了
- [ ] Android署名設定完了
- [ ] iOSプロビジョニング完了
- [ ] 最終テスト完了
- [ ] ストア用スクリーンショット作成（オプション）
- [ ] アプリ説明文作成（オプション）

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 担当者 |
|------|-----------|---------|-------|
| 2025-12-06 | 1.0.0 | 初版作成 | - |
